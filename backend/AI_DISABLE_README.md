# AI System Management - –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ AI —Ñ—É–Ω–∫—Ü–∏–π

## –û–±–∑–æ—Ä

–ò–∑-–∑–∞ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –≤—Å–µ AI (–Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤—ã–µ) –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã. –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å AI —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∏ –ª–µ–≥–∫–æ –∏—Ö –≤–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## –°—Ç–∞—Ç—É—Å AI —Å–∏—Å—Ç–µ–º—ã

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: –û–¢–ö–õ–Æ–ß–ï–ù–û** ‚õî

- AI –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ  
- –¢—è–∂–µ–ª—ã–µ ML –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- SystemD —Å–µ—Ä–≤–∏—Å—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI —Ñ—É–Ω–∫—Ü–∏—è–º–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è

AI —Ñ—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `ENABLE_AI` –≤ —Ñ–∞–π–ª–µ `.env`:

```bash
# AI Components Control
# Set to false to disable AI features due to high server load
ENABLE_AI=false
```

### –í–∫–ª—é—á–µ–Ω–∏–µ AI

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è AI —Ñ—É–Ω–∫—Ü–∏–π:

1. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   # –í —Ñ–∞–π–ª–µ .env
   ENABLE_AI=true
   ```

2. **–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ requirements.txt:**
   ```bash
   # –ù–∞–π–¥–∏—Ç–µ –∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
   torch>=2.0.0
   transformers>=4.30.0
   scikit-learn>=1.3.0
   sentence-transformers>=2.2.0
   # –∏ –¥—Ä—É–≥–∏–µ AI/ML –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   pip install -r requirements.txt
   ```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   systemctl restart healzy-backend
   ```

5. **–í–∫–ª—é—á–∏—Ç–µ AI —Å–µ—Ä–≤–∏—Å—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã):**
   ```bash
   sudo ./manage_ai_services.sh
   ```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ AI

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è AI —Ñ—É–Ω–∫—Ü–∏–π:

1. **–ò–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   # –í —Ñ–∞–π–ª–µ .env
   ENABLE_AI=false
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   systemctl restart healzy-backend
   ```

3. **–û—Ç–∫–ª—é—á–∏—Ç–µ AI —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   sudo ./manage_ai_services.sh
   ```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### –û—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **AI Router** (`ai_router.py`)
   - –ó–∞–º–µ–Ω–µ–Ω –Ω–∞ –∑–∞–≥–ª—É—à–∫—É (`ai_router_stub.py`)
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç "AI –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω" –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

2. **AI Services** (`ai_service/`)
   - –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∑–∞–≥–ª—É—à–∫–∏ (`ai_service/stubs.py`)
   - –°–æ–¥–µ—Ä–∂–∞—Ç —Ç–æ—Ç –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏

3. **Continuous Learning** 
   - `ai_continuous_learning.py` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ENABLE_AI –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
   - `continuous_learning_service.py` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ENABLE_AI –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
   - `start_continuous_learning.py` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ENABLE_AI –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

4. **SystemD Services**
   - `ai-continuous-learning.service` - –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
   - `ai-learning.service` - –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

5. **ML Dependencies**
   - `torch`, `transformers`, `sentence-transformers` - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
   - `scikit-learn`, `tensorflow` - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
   - –ë–∞–∑–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (`numpy`, `pandas`) –æ—Å—Ç–∞–≤–ª–µ–Ω—ã

### API Endpoints –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–º AI

–í—Å–µ AI —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç HTTP 503 (Service Unavailable) —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º:

```json
{
  "error": "AI_TEMPORARILY_DISABLED",
  "message": "AI —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã –∏–∑-–∑–∞ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –Ω–∞–ø—Ä—è–º—É—é.",
  "recommendation": "–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏"
}
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- `POST /api/ai/diagnosis` - AI –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- `GET /api/ai/patient/history` - –ò—Å—Ç–æ—Ä–∏—è AI –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- `POST /api/ai/feedback` - –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å AI
- `GET /api/ai/feedback/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- `POST /api/ai/admin/collect-data` - –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (–∞–¥–º–∏–Ω)
- `POST /api/ai/admin/train` - –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (–∞–¥–º–∏–Ω)
- `GET /api/ai/admin/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ AI (–∞–¥–º–∏–Ω)

**–ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- `GET /api/ai/status` - –°—Ç–∞—Ç—É—Å AI —Å–∏—Å—Ç–µ–º—ã

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

### –ß–µ—Ä–µ–∑ API

```bash
curl https://healzy.uz/api/ai/status
```

–û—Ç–≤–µ—Ç –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–º AI:
```json
{
  "ai_enabled": false,
  "status": "disabled", 
  "message": "AI —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã –∏–∑-–∑–∞ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä",
  "reason": "–í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ –∏–∑-–∑–∞ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä"
}
```

### –ß–µ—Ä–µ–∑ –ª–æ–≥–∏

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –ª–æ–≥–∞—Ö –ø–æ—è–≤–∏—Ç—Å—è:
```
AI —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã - –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ AI —Ä–æ—É—Ç–µ—Ä–∞
```

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å–∫–∞ continuous learning:
```
üõë AI —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã (ENABLE_AI=false)
üí° –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ENABLE_AI=true –≤ .env —Ñ–∞–π–ª–µ
üîÑ –°–∏—Å—Ç–µ–º–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
```

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ AI –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:

**–°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏:**
- ‚ùå –ù–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ–ª—å—à–∏—Ö ML –º–æ–¥–µ–ª–µ–π –≤ –ø–∞–º—è—Ç—å
- ‚ùå –ù–µ—Ç —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π inference
- ‚ùå –ù–µ—Ç —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ continuous learning
- ‚ùå –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:**
- üîΩ –°–Ω–∏–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAM (>2GB)
- üîΩ –°–Ω–∏–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU (50%+ quota)
- üîΩ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –¥–∏—Å–∫ (–Ω–µ—Ç –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π)
- üîΩ –°–Ω–∏–∂–µ–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–Ω–µ—Ç —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–µ—Ç—Å—è:

- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å –≤—Ä–∞—á–∞–º–∏
- ‚úÖ –ß–∞—Ç—ã –∏ –∑–≤–æ–Ω–∫–∏
- ‚úÖ –ù–æ–≤–æ—Å—Ç–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

–õ–æ–≥–∏ AI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å–∫–∞):
- `continuous_learning.log` - –ª–æ–≥–∏ continuous learning (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–ª—Å—è)
- SystemD –∂—É—Ä–Ω–∞–ª—ã: `journalctl -u ai-continuous-learning.service`

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
# CPU –∏ –ø–∞–º—è—Ç—å
htop

# –ü—Ä–æ—Ü–µ—Å—Å—ã Python
ps aux | grep python

# SystemD —Å–µ—Ä–≤–∏—Å—ã  
systemctl status ai-*
```

## –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ AI

1. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞
2. –í–∫–ª—é—á–∏—Ç–µ AI (`ENABLE_AI=true`)
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ API

### –ß–∞—Å—Ç–∏—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å AI —Ñ—É–Ω–∫—Ü–∏–π:
- –¢–æ–ª—å–∫–æ AI –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–±–µ–∑ continuous learning)
- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –æ–±—É—á–µ–Ω–∏–µ)
- –¢–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

### –û—Ç–∫–∞—Ç

–í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
1. –ë—ã—Å—Ç—Ä–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `ENABLE_AI=false`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ AI —Å–µ—Ä–≤–∏—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ENABLE_AI
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ `/api/ai/status`
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫